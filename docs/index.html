<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@dt-esa/dynatrace-api-balancer</title><meta name="description" content="Documentation for @dt-esa/dynatrace-api-balancer"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@dt-esa/dynatrace-api-balancer</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1>@dt-esa/dynatrace-api-balancer</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#dynatrace-api-balancer" id="dynatrace-api-balancer" style="color: inherit; text-decoration: none;">
  <h2>dynatrace-api-balancer</h2>
</a>
<p>A wrapper around <a href="https://axios-http.com/docs/req_config" title="Axios">Axios</a> that balances and throttles Dynatrace API requests across tenants, clusters and cluster nodes.</p>
<p>A dependency map can be found <a href="https://npmgraph.js.org/?q=@dt-esa/dynatrace-api-balancer">here</a>.</p>

<a href="#usage" id="usage" style="color: inherit; text-decoration: none;">
  <h3>Usage</h3>
</a>
<p>Using <a href="classes/BalancedAPIRequest.html">BalancedAPIRequest</a>:</p>
<pre><code class="language-javascript"><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">api</span><span class="hl-1"> = </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-3">BalancedAPIRequest</span><span class="hl-1">(</span><span class="hl-4">limits</span><span class="hl-1">, </span><span class="hl-4">tenants</span><span class="hl-1">);</span><br/><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">cancellablePromise</span><span class="hl-1"> = </span><span class="hl-4">api</span><span class="hl-1">.</span><span class="hl-3">fetch</span><span class="hl-1">(</span><span class="hl-4">options</span><span class="hl-1">).</span><span class="hl-3">then</span><span class="hl-1">(</span><span class="hl-4">data</span><span class="hl-1"> </span><span class="hl-0">=&gt;</span><span class="hl-1"> { ... }).</span><span class="hl-3">catch</span><span class="hl-1">(</span><span class="hl-4">err</span><span class="hl-1"> </span><span class="hl-0">=&gt;</span><span class="hl-1"> { ... });</span><br/><span class="hl-5">// OR </span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">cancellableEventEmitter</span><span class="hl-1"> = </span><span class="hl-4">api</span><span class="hl-1">.</span><span class="hl-3">fetch</span><span class="hl-1">(</span><span class="hl-4">options</span><span class="hl-1">, (</span><span class="hl-4">err</span><span class="hl-1">, </span><span class="hl-4">data</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> { ... });</span>
</code></pre>
<p>Using <a href="classes/DirectAPIRequest.html">DirectAPIRequest</a>:</p>
<pre><code class="language-javascript"><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">api</span><span class="hl-1"> = </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-3">DirectAPIRequest</span><span class="hl-1">(</span><span class="hl-4">limits</span><span class="hl-1">);</span><br/><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">promise</span><span class="hl-1"> = </span><span class="hl-4">api</span><span class="hl-1">.</span><span class="hl-3">fetch</span><span class="hl-1">(</span><span class="hl-4">options</span><span class="hl-1">).</span><span class="hl-3">then</span><span class="hl-1">(</span><span class="hl-4">data</span><span class="hl-1"> </span><span class="hl-0">=&gt;</span><span class="hl-1"> { ... }).</span><span class="hl-3">catch</span><span class="hl-1">(</span><span class="hl-4">err</span><span class="hl-1"> </span><span class="hl-0">=&gt;</span><span class="hl-1"> { ... });</span><br/><span class="hl-5">// OR</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">eventEmitter</span><span class="hl-1"> = </span><span class="hl-4">api</span><span class="hl-1">.</span><span class="hl-3">fetch</span><span class="hl-1">(</span><span class="hl-4">options</span><span class="hl-1">, (</span><span class="hl-4">err</span><span class="hl-1">, </span><span class="hl-4">data</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> { ... });</span>
</code></pre>
<p>For convenience aliases have been provided for the following request methods:</p>
<ul>
<li><code>get(url, options[, onDone])</code></li>
<li><code>delete(url, options[, onDone])</code></li>
<li><code>post(url, data, options[, onDone])</code></li>
<li><code>put(url, data, options[, onDone])</code></li>
</ul>

<a href="#features" id="features" style="color: inherit; text-decoration: none;">
  <h3>Features</h3>
</a>
<p>The <a href="classes/DirectAPIRequest.html">DirectAPIRequest</a> wrapper responds to and recovers from 429 and 503 errors gracefully (up till specified limits). It also automatically consolidates paged responses (from both v1 and v2 APIs). Finally, it unifies the various types of errors that may happen while initializating a request, issuing it, and processing its response. This greatly simplifies writing code that makes Dynatrace API requests.</p>
<p>The <a href="classes/BalancedAPIRequest.html">BalancedAPIRequest</a> adds an efficient load balancing, queuing and request throttling layer that protects the Dynatrace cluster from a request overload while ensuring that for each request the best (i.e. most available) cluster node is selected to handle that request. Additionally, it natively supports cancelling any request (or all) if the caller is no longer interested in the response. </p>
<p>Note that the interfaces of <a href="classes/BalancedAPIRequest.html">BalancedAPIRequest</a> and <a href="classes/DirectAPIRequest.html">DirectAPIRequest</a> are virtually identical.</p>
<p>The <a href="classes/BalancedAPIRequest.html">BalancedAPIRequest</a> is a cornerstone of several Dynatrace ESA solutions, most notably the ETL Service and the API Security Gateway. Additionally, <a href="classes/DirectAPIRequest.html">DirectAPIRequest</a> is used by the Dynatrace API Helper, a solution that greatly simplifies the process of writing code to access Dynatrace APIs. Please contact <strong><a href="mailto:esa@dynatrace.com">esa@dynatrace.com</a></strong> for more information.</p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Exports</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-class"><a href="classes/BalancedAPIRequest.html" class="tsd-kind-icon">BalancedAPIRequest</a></li><li class="tsd-kind-class"><a href="classes/CancellableEventEmitter.html" class="tsd-kind-icon">Cancellable<wbr/>Event<wbr/>Emitter</a></li><li class="tsd-kind-class"><a href="classes/CancellablePromise.html" class="tsd-kind-icon">Cancellable<wbr/>Promise</a></li><li class="tsd-kind-class"><a href="classes/DirectAPIRequest.html" class="tsd-kind-icon">DirectAPIRequest</a></li><li class="tsd-kind-class"><a href="classes/GlobalRequestQueue.html" class="tsd-kind-icon">Global<wbr/>Request<wbr/>Queue</a></li><li class="tsd-kind-class"><a href="classes/Host.html" class="tsd-kind-icon">Host</a></li><li class="tsd-kind-class"><a href="classes/NoThrottle.html" class="tsd-kind-icon">No<wbr/>Throttle</a></li><li class="tsd-kind-class"><a href="classes/Request.html" class="tsd-kind-icon">Request</a></li><li class="tsd-kind-class"><a href="classes/RequestQueue.html" class="tsd-kind-icon">Request<wbr/>Queue</a></li><li class="tsd-kind-class tsd-has-type-parameter"><a href="classes/Ring.html" class="tsd-kind-icon">Ring</a></li><li class="tsd-kind-class"><a href="classes/Throttle.html" class="tsd-kind-icon">Throttle</a></li><li class="tsd-kind-type-alias"><a href="modules.html#Limits" class="tsd-kind-icon">Limits</a></li><li class="tsd-kind-type-alias"><a href="modules.html#RequestCallback" class="tsd-kind-icon">Request<wbr/>Callback</a></li><li class="tsd-kind-type-alias"><a href="modules.html#RequestError" class="tsd-kind-icon">Request<wbr/>Error</a></li><li class="tsd-kind-type-alias"><a href="modules.html#RequestOptions" class="tsd-kind-icon">Request<wbr/>Options</a></li><li class="tsd-kind-type-alias"><a href="modules.html#Tenant" class="tsd-kind-icon">Tenant</a></li><li class="tsd-kind-type-alias"><a href="modules.html#TenantConfig" class="tsd-kind-icon">Tenant<wbr/>Config</a></li><li class="tsd-kind-type-alias"><a href="modules.html#Tenants" class="tsd-kind-icon">Tenants</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li><li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>